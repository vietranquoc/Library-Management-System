<div class="admin-wrapper">
  <header class="admin-header">
    <div class="logo">üìö Library Management - Admin</div>
    <div class="header-right">
      <span class="username">Xin ch√†o, {{ getUsername() }}</span>
      <button class="logout-btn" (click)="onLogout()">ƒêƒÉng xu·∫•t</button>
    </div>
  </header>

  <div class="admin-container">
    <app-admin-sidebar></app-admin-sidebar>

    <main class="admin-main">
      <div class="dashboard-content">
        <h1>Dashboard Qu·∫£n tr·ªã</h1>

        @if (loading) {
          <div class="loading-state">
            <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
          </div>
        } @else if (errorMessage) {
          <div class="error-state">
            <p>{{ errorMessage }}</p>
            <button class="retry-btn" (click)="loadStatistics()">Th·ª≠ l·∫°i</button>
          </div>
        } @else if (statistics) {
          <!-- Statistics Cards -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">üìö</div>
              <div class="stat-info">
                <h3>T·ªïng s·ªë s√°ch</h3>
                <p class="stat-value">{{ statistics.totalBooks }}</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">üë§</div>
              <div class="stat-info">
                <h3>Th√†nh vi√™n ƒëang ho·∫°t ƒë·ªông</h3>
                <p class="stat-value">{{ statistics.activeMembers }}</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">üìñ</div>
              <div class="stat-info">
                <h3>S√°ch ƒëang m∆∞·ª£n</h3>
                <p class="stat-value">{{ statistics.totalBorrowedBooks }}</p>
              </div>
            </div>
            <div class="stat-card stat-warning">
              <div class="stat-icon">‚ö†Ô∏è</div>
              <div class="stat-info">
                <h3>S√°ch qu√° h·∫°n</h3>
                <p class="stat-value">{{ statistics.overdueBooks }}</p>
              </div>
            </div>
          </div>

          <!-- Charts Section -->
          <div class="charts-section">
            <div class="chart-container">
              <div class="chart-card">
                <canvas id="loanTrendChart"></canvas>
              </div>
            </div>
            <div class="chart-container">
              <div class="chart-card">
                <canvas id="categoryChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Recent Activities -->
          <div class="activities-section">
            <h2>Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h2>
            <div class="activities-list">
              @if (statistics.recentActivities.length === 0) {
                <div class="empty-state">
                  <p>Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</p>
                </div>
              } @else {
                @for (activity of statistics.recentActivities; track activity.timestamp) {
                  <div class="activity-item">
                    <div class="activity-icon">{{ getActivityIcon(activity.type) }}</div>
                    <div class="activity-content">
                      <p class="activity-description">{{ activity.description }}</p>
                      <span class="activity-time">{{ formatActivityTime(activity.timestamp) }}</span>
                    </div>
                  </div>
                }
              }
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="quick-actions">
            <h2>Thao t√°c nhanh</h2>
            <div class="actions-grid">
              <a routerLink="/admin/categories" class="action-card">
                <span class="action-icon">‚ûï</span>
                <h3>Th√™m th·ªÉ lo·∫°i m·ªõi</h3>
              </a>
              <a routerLink="/admin/books" class="action-card">
                <span class="action-icon">‚ûï</span>
                <h3>Th√™m s√°ch m·ªõi</h3>
              </a>
              <a routerLink="/admin/staff" class="action-card">
                <span class="action-icon">‚ûï</span>
                <h3>Th√™m nh√¢n vi√™n</h3>
              </a>
            </div>
          </div>
        }
      </div>
    </main>
  </div>
</div>
