<div class="staff-wrapper">
  <header class="staff-header">
    <div class="logo">üìö Library Management - Staff</div>
    <div class="header-right">
      <span class="username">Xin ch√†o, {{ getUsername() }}</span>
      <button class="logout-btn" (click)="onLogout()">ƒêƒÉng xu·∫•t</button>
    </div>
  </header>

  <div class="staff-container">
    <app-staff-sidebar></app-staff-sidebar>

    <main class="staff-main">
      <div class="dashboard-content">
        <h1>Dashboard Nh√¢n vi√™n</h1>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">üìã</div>
            <div class="stat-info">
              <h3>Phi·∫øu m∆∞·ª£n ch·ªù x·ª≠ l√Ω</h3>
              <p class="stat-value">{{ requestedLoans.length }}</p>
            </div>
          </div>
        </div>

        @if (loading) {
          <div class="loading-state">
            <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
          </div>
        } @else if (errorMessage) {
          <div class="error-state">
            <p>{{ errorMessage }}</p>
            <button class="retry-btn" (click)="loadRequestedLoans()">Th·ª≠ l·∫°i</button>
          </div>
        } @else if (requestedLoans.length > 0) {
          <div class="requests-section">
            <h2>Phi·∫øu m∆∞·ª£n ch·ªù g√°n b·∫£n sao s√°ch</h2>
            <div class="requests-list">
              @for (loan of requestedLoans; track loan.id) {
                <div class="request-card">
                  <div class="request-header">
                    <div>
                      <h3>{{ loan.book.title }}</h3>
                      <p class="member-name">Th√†nh vi√™n: {{ loan.member.firstName }} {{ loan.member.lastName }}</p>
                      <p class="member-email">{{ loan.member.email }}</p>
                    </div>
                    <a [routerLink]="['/staff/loan-requests', loan.id]" class="assign-btn">
                      G√°n b·∫£n sao s√°ch ‚Üí
                    </a>
                  </div>
                  <div class="request-details">
                    <div class="detail-item">
                      <span class="detail-label">ISBN:</span>
                      <span class="detail-value">{{ loan.book.isbn }}</span>
                    </div>
                    <div class="detail-item">
                      <span class="detail-label">Ng√†y y√™u c·∫ßu:</span>
                      <span class="detail-value">{{ loan.loanDate ? (loan.loanDate | date: 'dd/MM/yyyy') : 'Ch∆∞a c√≥' }}</span>
                    </div>
                  </div>
                </div>
              }
            </div>
          </div>
        } @else {
          <div class="empty-state">
            <p>Kh√¥ng c√≥ phi·∫øu m∆∞·ª£n n√†o ch·ªù x·ª≠ l√Ω</p>
          </div>
        }
      </div>
    </main>
  </div>
</div>

